(()=>{var t={72:(t,e,o)=>{"use strict";var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var t={};return function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}t[e]=o}return t[e]}}(),s=[];function l(t){for(var e=-1,o=0;o<s.length;o++)if(s[o].identifier===t){e=o;break}return e}function a(t,e){for(var o={},i=[],n=0;n<t.length;n++){var r=t[n],a=e.base?r[0]+e.base:r[0],c=o[a]||0,d="".concat(a," ").concat(c);o[a]=c+1;var u=l(d),h={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(s[u].references++,s[u].updater(h)):s.push({identifier:d,updater:v(h,e),references:1}),i.push(d)}return i}function c(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var n=o.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach(function(t){e.setAttribute(t,i[t])}),"function"==typeof t.insert)t.insert(e);else{var s=r(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function h(t,e,o,i){var n=o?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=u(e,n);else{var r=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function p(t,e,o){var i=o.css,n=o.media,r=o.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var f=null,m=0;function v(t,e){var o,i,n;if(e.singleton){var r=m++;o=f||(f=c(e)),i=h.bind(null,o,r,!1),n=h.bind(null,o,r,!0)}else o=c(e),i=p.bind(null,o,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(o)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var o=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<o.length;i++){var n=l(o[i]);s[n].references--}for(var r=a(t,e),c=0;c<o.length;c++){var d=l(o[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}o=r}}}},237:t=>{"use strict";t.exports=CKEditor5.dll},311:(t,e,o)=>{t.exports=o(237)("./src/ui.js")},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var o=t(e);return e[2]?"@media ".concat(e[2]," {").concat(o,"}"):o}).join("")},e.i=function(t,o,i){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(i)for(var r=0;r<this.length;r++){var s=this[r][0];null!=s&&(n[s]=!0)}for(var l=0;l<t.length;l++){var a=[].concat(t[l]);i&&n[a[0]]||(o&&(a[2]?a[2]="".concat(o," and ").concat(a[2]):a[2]=o),e.push(a))}},e}},584:(t,e,o)=>{t.exports=o(237)("./src/utils.js")},704:(t,e,o)=>{"use strict";o.d(e,{A:()=>r});var i=o(314),n=o.n(i)()(function(t){return t[1]});n.push([t.id,".ck-tooltip-icon{background-color:#e0f4ff;border-radius:50%;color:#038ed8;cursor:pointer;display:inline-block;font-size:12px;height:16px;line-height:16px;margin:0 2px;text-align:center;transition:background-color .2s ease;width:16px}.ck-tooltip-icon:hover{background-color:#ccedff}.ck-tooltip-widget{display:inline-block;position:relative}.ck-tooltip-widget.ck-widget_selected{outline:2px solid #038ed8;outline-offset:1px}.ck-tooltip-form .ck-labeled-field-view{width:100%}.ck-tooltip-form .ck-labeled-field-view textarea{box-sizing:border-box;resize:vertical;width:100%}.ck-balloon-panel .ck-tooltip-form{width:300px}",""]);const r=n},782:(t,e,o)=>{t.exports=o(237)("./src/core.js")},901:(t,e,o)=>{t.exports=o(237)("./src/widget.js")}},e={};function o(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,o),r.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nc=void 0;var i={};(()=>{"use strict";o.r(i),o.d(i,{Tooltip:()=>d,icons:()=>f});var t=o(782),e=o(311),n=o(901),r=o(584),s=o(72),l=o.n(s),a=o(704),c={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};l()(a.A,c);a.A.locals;class d extends t.Plugin{static get requires(){return[n.Widget,e.ContextualBalloon]}static get pluginName(){return"Tooltip"}init(){this._balloon=this.editor.plugins.get(e.ContextualBalloon),this._defineSchema(),this._defineConverters(),this._defineCommands(),this._defineUI()}_defineSchema(){this.editor.model.schema.register("tooltip",{inheritAllFrom:"$inlineObject",allowAttributes:["tooltipContent"]})}_defineConverters(){const t=this.editor.conversion;t.for("editingDowncast").elementToElement({model:"tooltip",view:(t,{writer:e})=>{const o=t.getAttribute("tooltipContent")||"",i=e.createContainerElement("span",{class:"e7-tooltip ck-tooltip-widget",title:o}),r=e.createUIElement("i",{class:"ck-tooltip-icon"},function(t){const e=this.toDomElement(t);return e.innerHTML="&#8505;",e});return e.insert(e.createPositionAt(i,0),r),(0,n.toWidget)(i,e,{label:"tooltip widget"})}}),t.for("editingDowncast").attributeToAttribute({model:"tooltipContent",view:"title",converterPriority:"low"}),t.for("dataDowncast").elementToElement({model:"tooltip",view:(t,{writer:e})=>{const o=t.getAttribute("tooltipContent")||"",i=e.createContainerElement("span",{class:"e7-tooltip",title:o,"x-data":"tooltip"}),n=e.createUIElement("i",{class:"e7-tooltip-icon"},function(t){const e=this.toDomElement(t);return e.innerHTML="&#8505;",e});return e.insert(e.createPositionAt(i,0),n),i}}),t.for("dataDowncast").attributeToAttribute({model:"tooltipContent",view:"title",converterPriority:"low"}),t.for("upcast").elementToElement({view:{name:"span",classes:"e7-tooltip"},model:(t,{writer:e})=>{const o=t.getAttribute("title")||"";return e.createElement("tooltip",{tooltipContent:o})},converterPriority:"high"})}_defineCommands(){this.editor.commands.add("insertTooltip",new u(this.editor)),this.editor.commands.add("editTooltip",new h(this.editor))}_defineUI(){const t=this.editor,o=t.t;t.ui.componentFactory.add("tooltip",t=>{const i=new e.ButtonView(t);return i.set({label:o("Insert tooltip"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><circle cx="10" cy="10" r="8" fill="none" stroke="currentColor" stroke-width="2"/><text x="10" y="14" text-anchor="middle" font-size="12" font-weight="bold" fill="currentColor">i</text></svg>',tooltip:!0}),i.on("execute",()=>{this._showTooltipBalloon()}),i}),document.addEventListener("click",e=>{const o=e.target.closest(".ck-tooltip-widget");if(o&&t.editing.view.document.isFocused){e.preventDefault(),e.stopPropagation();const i=t.editing.view.domConverter.mapDomToView(o);if(i){const e=t.editing.mapper.toModelElement(i);if(e){t.model.change(t=>{t.setSelection(e,"on")});const o=e.getAttribute("tooltipContent")||"";this._showTooltipBalloon(o,!0)}}}})}_showTooltipBalloon(t="",o=!1){const i=this.editor;this._formView=new((0,e.CssTransitionDisablerMixin)(p))(i.locale,this._getFormValidators());const n=this._formView;n.on("submit",()=>{if(n.isValid()){const t=n.content,e=this._convertMarkdownToHtml(t);o?i.execute("editTooltip",{content:e}):i.execute("insertTooltip",{content:e}),this._hideBalloon()}}),n.on("cancel",()=>{this._hideBalloon()});const r=this._convertHtmlToMarkdown(t);n.content=r,n.resetFormStatus(),this._balloon.add({view:n,position:this._getBalloonPositionData()}),this._addClickOutsideHandler(),n.focus()}_hideBalloon(){this._balloon.hasView(this._formView)&&this._balloon.remove(this._formView),this._removeClickOutsideHandler(),this._formView&&(this._formView.destroy(),this._formView=void 0),this.editor.editing.view.focus()}_getBalloonPositionData(){const t=this.editor.editing.view,o=t.document.selection.getFirstRange();return o?{target:t.domConverter.viewRangeToDom(o),positions:[e.BalloonPanelView.defaultPositions.northArrowSouth,e.BalloonPanelView.defaultPositions.northArrowSouthWest,e.BalloonPanelView.defaultPositions.northArrowSouthEast,e.BalloonPanelView.defaultPositions.southArrowNorth,e.BalloonPanelView.defaultPositions.southArrowNorthWest,e.BalloonPanelView.defaultPositions.southArrowNorthEast]}:{target:this.editor.ui.getEditableElement(),positions:[e.BalloonPanelView.defaultPositions.northArrowSouth]}}_addClickOutsideHandler(){this._clickOutsideHandler=t=>{var e,o;const i=t.target,n=null===(o=null===(e=this._balloon)||void 0===e?void 0:e.view)||void 0===o?void 0:o.element;n&&!n.contains(i)&&this._hideBalloon()},document.addEventListener("click",this._clickOutsideHandler,!0)}_removeClickOutsideHandler(){this._clickOutsideHandler&&(document.removeEventListener("click",this._clickOutsideHandler,!0),this._clickOutsideHandler=void 0)}_convertMarkdownToHtml(t){return t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2">$1</a>')}_convertHtmlToMarkdown(t){return t.replace(/<a href="([^"]+)">([^<]+)<\/a>/g,"[$2]($1)")}_getFormValidators(){const t=this.editor.t;return[e=>{if(!e.content.length)return t("Tooltip content cannot be empty.")}]}}class u extends t.Command{execute(t={}){const e=this.editor.model;e.change(o=>{const i=o.createElement("tooltip",{tooltipContent:t.content||""});e.insertContent(i),o.setSelection(i,"after")})}refresh(){const t=this.editor.model,e=t.document.selection,o=t.schema.findAllowedParent(e.getFirstPosition(),"tooltip");this.isEnabled=null!==o}}class h extends t.Command{execute(t={}){var e;const o=this.editor.model,i=o.document.selection;let n=null;const r=i.getSelectedElement();if(r&&"tooltip"===r.name)n=r;else{const t=null===(e=i.getFirstPosition())||void 0===e?void 0:e.parent;t&&"tooltip"===t.name&&(n=t)}n&&o.change(e=>{e.setAttribute("tooltipContent",t.content||"",n)})}refresh(){var t;const e=this.editor.model.document.selection,o=e.getSelectedElement(),i=null===(t=e.getFirstPosition())||void 0===t?void 0:t.parent;this.isEnabled="tooltip"===(null==o?void 0:o.name)||"tooltip"===(null==i?void 0:i.name)}}class p extends e.View{constructor(t,e=[]){super(t),this.focusTracker=new r.FocusTracker,this.keystrokes=new r.KeystrokeHandler,this._validators=e,this.contentInputView=this._createContentInput(),this.saveButtonView=this._createSaveButton(),this.cancelButtonView=this._createCancelButton(),this.children=this.createCollection([this._createFormRow([this.contentInputView],["ck-form__row_large-top-padding"]),this._createInstructionsView(),this._createActionsRow([this.cancelButtonView,this.saveButtonView])]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-tooltip-form","ck-responsive-form"],tabindex:"-1"},children:this.children}),this.keystrokes.set("Esc",(t,e)=>{this.fire("cancel"),e()})}render(){super.render(),(0,e.submitHandler)({view:this}),[this.contentInputView,this.saveButtonView,this.cancelButtonView].forEach(t=>{this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.contentInputView.focus()}isValid(){this.resetFormStatus();for(const t of this._validators){const e=t(this);if(e)return this.contentInputView.errorText=e,!1}return!0}resetFormStatus(){this.contentInputView.errorText=null}_createContentInput(){var t;const o=(null===(t=this.locale)||void 0===t?void 0:t.t)||(t=>t),i=new e.LabeledFieldView(this.locale,e.createLabeledTextarea);return i.label=o("Tooltip Content"),i.class="ck-labeled-field-view_full-width",i.fieldView.set({minRows:3,maxRows:8,placeholder:o("Enter tooltip content here...")}),i.extendTemplate({attributes:{style:"width: 100%;"}}),i}_createSaveButton(){var t;const o=(null===(t=this.locale)||void 0===t?void 0:t.t)||(t=>t),i=new e.ButtonView(this.locale);return i.set({label:o("Save"),withText:!0,type:"submit",class:"ck-button-action ck-button-bold"}),i.on("execute",()=>{this.fire("submit")}),i}_createCancelButton(){var t;const o=(null===(t=this.locale)||void 0===t?void 0:t.t)||(t=>t),i=new e.ButtonView(this.locale);return i.set({label:o("Cancel"),withText:!0}),i.delegate("execute").to(this,"cancel"),i}_createFormRow(t,o){const i=new e.View(this.locale);return i.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",...o]},children:t}),i}_createActionsRow(t){const o=new e.View(this.locale);return o.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:t}),o}_createInstructionsView(){var t;const o=(null===(t=this.locale)||void 0===t?void 0:t.t)||(t=>t),i=new e.View(this.locale);return i.setTemplate({tag:"div",attributes:{class:["ck","ck-tooltip-instructions"],style:"margin: 10px 0 0 0; padding: 8px; background: #f8f9fa; border-radius: 4px; font-size: 12px; color: #666;"},children:[{text:o("You can use markdown-style links:")},{tag:"br"},{text:o("[link text](https://example.com)")}]}),i}get content(){var t,e;return(null===(e=null===(t=this.contentInputView.fieldView.element)||void 0===t?void 0:t.value)||void 0===e?void 0:e.trim())||""}set content(t){this.contentInputView.fieldView.value=t}}const f={ckeditor:"<svg width='68' height='64' viewBox='0 0 68 64' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M43.71 11.025a11.508 11.508 0 0 0-1.213 5.159c0 6.42 5.244 11.625 11.713 11.625.083 0 .167 0 .25-.002v16.282a5.464 5.464 0 0 1-2.756 4.739L30.986 60.7a5.548 5.548 0 0 1-5.512 0L4.756 48.828A5.464 5.464 0 0 1 2 44.089V20.344c0-1.955 1.05-3.76 2.756-4.738L25.474 3.733a5.548 5.548 0 0 1 5.512 0l12.724 7.292z' fill='#FFF'/><path d='M45.684 8.79a12.604 12.604 0 0 0-1.329 5.65c0 7.032 5.744 12.733 12.829 12.733.091 0 .183-.001.274-.003v17.834a5.987 5.987 0 0 1-3.019 5.19L31.747 63.196a6.076 6.076 0 0 1-6.037 0L3.02 50.193A5.984 5.984 0 0 1 0 45.003V18.997c0-2.14 1.15-4.119 3.019-5.19L25.71.804a6.076 6.076 0 0 1 6.037 0L45.684 8.79zm-29.44 11.89c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h25.489c.833 0 1.51-.67 1.51-1.498v-.715c0-.827-.677-1.498-1.51-1.498h-25.49.001zm0 9.227c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h18.479c.833 0 1.509-.67 1.509-1.498v-.715c0-.827-.676-1.498-1.51-1.498H16.244zm0 9.227c-.834 0-1.51.671-1.51 1.498v.715c0 .828.676 1.498 1.51 1.498h25.489c.833 0 1.51-.67 1.51-1.498v-.715c0-.827-.677-1.498-1.51-1.498h-25.49.001zm41.191-14.459c-5.835 0-10.565-4.695-10.565-10.486 0-5.792 4.73-10.487 10.565-10.487C63.27 3.703 68 8.398 68 14.19c0 5.791-4.73 10.486-10.565 10.486v-.001z' fill='#1EBC61' fill-rule='nonzero'/><path d='M60.857 15.995c0-.467-.084-.875-.251-1.225a2.547 2.547 0 0 0-.686-.88 2.888 2.888 0 0 0-1.026-.531 4.418 4.418 0 0 0-1.259-.175c-.134 0-.283.006-.447.018-.15.01-.3.034-.446.07l.075-1.4h3.587v-1.8h-5.462l-.214 5.06c.319-.116.682-.21 1.089-.28.406-.071.77-.107 1.088-.107.218 0 .437.021.655.063.218.041.413.114.585.218s.313.244.422.419c.109.175.163.391.163.65 0 .424-.132.745-.396.961a1.434 1.434 0 0 1-.938.325c-.352 0-.656-.1-.912-.3-.256-.2-.43-.453-.523-.762l-1.925.588c.1.35.258.664.472.943.214.279.47.514.767.706.298.191.63.339.995.443.365.104.749.156 1.151.156.437 0 .86-.064 1.272-.193.41-.13.778-.323 1.1-.581a2.8 2.8 0 0 0 .775-.981c.193-.396.29-.864.29-1.405h-.001z' fill='#FFF' fill-rule='nonzero'/></g></svg>\n"}})(),(window.CKEditor5=window.CKEditor5||{}).tooltip=i})();